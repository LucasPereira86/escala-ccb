<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escala CCB - Porteiros e Auxiliares</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p id="loading-text">Carregando...</p>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <span class="login-icon">üèõÔ∏è</span>
                <h1>Escala CCB</h1>
                <p>Congrega√ß√£o Crist√£ no Brasil</p>
                <p class="login-subtitle">Ituiutaba-MG | Novo Tempo II</p>
            </div>

            <!-- Login Form -->
            <form id="login-form" class="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" placeholder="seu@email.com" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Senha</label>
                    <input type="password" id="login-password" placeholder="Sua senha" required minlength="6">
                </div>
                <p id="login-error" class="error-message" style="display: none;"></p>
                <button type="submit" class="btn-primary btn-full">
                    üîê Entrar
                </button>
            </form>
        </div>
    </div>

    <!-- App Container -->
    <div id="app-container" class="app-container" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üèõÔ∏è</span>
                    <div class="logo-text">
                        <h1>Escala CCB</h1>
                        <p>Congrega√ß√£o Crist√£ no Brasil</p>
                    </div>
                </div>
                <div class="header-right">
                    <div class="church-info">
                        <span>Ituiutaba-MG | Novo Tempo II</span>
                    </div>
                    <button class="btn-logout" onclick="handleLogout()">
                        üö™ Sair
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="dashboard">
                <span class="tab-icon">üè†</span>
                <span>In√≠cio</span>
            </button>
            <button class="tab-btn" data-tab="membros">
                <span class="tab-icon">üë•</span>
                <span>Membros</span>
            </button>
            <button class="tab-btn" data-tab="escalas">
                <span class="tab-icon">üìÖ</span>
                <span>Porteiro</span>
            </button>
            <button class="tab-btn" data-tab="som">
                <span class="tab-icon">üé§</span>
                <span>Som</span>
            </button>
            <button class="tab-btn" data-tab="brigadista">
                <span class="tab-icon">üßØ</span>
                <span>Brigadista</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <section id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üëî</div>
                        <div class="stat-info">
                            <span class="stat-number" id="total-porteiros">0</span>
                            <span class="stat-label">Porteiros</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üëó</div>
                        <div class="stat-info">
                            <span class="stat-number" id="total-auxiliares">0</span>
                            <span class="stat-label">Auxiliares</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üé§</div>
                        <div class="stat-info">
                            <span class="stat-number" id="total-som">0</span>
                            <span class="stat-label">Operadores Som</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üßØ</div>
                        <div class="stat-info">
                            <span class="stat-number" id="total-brigadista">0</span>
                            <span class="stat-label">Brigadistas</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìã</div>
                        <div class="stat-info">
                            <span class="stat-number" id="total-escalas">0</span>
                            <span class="stat-label">Escalas Salvas</span>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <h2>A√ß√µes R√°pidas</h2>
                    <div class="actions-grid">
                        <button class="action-btn" onclick="switchTab('membros')">
                            <span class="action-icon">‚ûï</span>
                            <span>Cadastrar Membro</span>
                        </button>
                        <button class="action-btn" onclick="switchTab('escalas')">
                            <span class="action-icon">üìÖ</span>
                            <span>Nova Escala</span>
                        </button>
                    </div>
                </div>

                <div class="next-services">
                    <h2>Pr√≥ximos Cultos</h2>
                    <div class="services-list" id="next-services-list">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </section>

            <!-- Membros Tab -->
            <section id="membros" class="tab-content">
                <div class="section-header">
                    <h2>Cadastro de Membros</h2>
                </div>

                <!-- Add Member Form -->
                <div class="form-card">
                    <h3>Adicionar Novo Membro</h3>
                    <form id="member-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="member-name">Nome do Membro</label>
                                <input type="text" id="member-name" placeholder="Digite o nome completo" required>
                            </div>
                            <div class="form-group">
                                <label for="member-type">Fun√ß√£o</label>
                                <select id="member-type" required>
                                    <option value="">Selecione...</option>
                                    <option value="porteiro">Porteiro (Irm√£o)</option>
                                    <option value="auxiliar">Auxiliar da Porta (Irm√£)</option>
                                    <option value="som">Operador de Som (Irm√£o)</option>
                                    <option value="brigadista_irmao">Brigadista (Irm√£o)</option>
                                    <option value="brigadista_irma">Brigadista (Irm√£)</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label>Disponibilidade (Dias que PODE servir)</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="availability" value="wednesday" checked>
                                        Quarta-feira
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="availability" value="sunday_morning" checked>
                                        Domingo (Manh√£)
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="availability" value="sunday_night" checked> Domingo
                                        (Noite)
                                    </label>
                                </div>
                            </div>
                            <div class="form-group full-width"
                                style="margin-top: 10px; padding-top: 10px; border-top: 1px dashed #e2e8f0;">
                                <label>Configura√ß√µes Avan√ßadas</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="member-once-month"> Escalar apenas 1 vez por m√™s
                                    </label>
                                </div>
                                <div class="form-group" style="margin-top: 10px;">
                                    <label for="member-partner">Dupla / Casal (Este membro s√≥ serve junto
                                        com...)</label>
                                    <select id="member-partner">
                                        <option value="">-- Ningu√©m (Sem v√≠nculo) --</option>
                                        <!-- Populated by JS -->
                                    </select>
                                    <small style="color: #64748b; display: block; margin-top: 4px;">Selecione o c√¥njuge
                                        ou parceiro de escala.</small>
                                </div>
                            </div>
                            <button type="submit" class="btn-primary">
                                <span>‚ûï</span> Adicionar
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Members Lists -->
                <div class="members-grid">
                    <div class="members-card">
                        <h3>üëî Porteiros (Irm√£os)</h3>
                        <ul class="members-list" id="porteiros-list">
                            <!-- Populated by JS -->
                        </ul>
                        <p class="empty-message" id="porteiros-empty">Nenhum porteiro cadastrado</p>
                    </div>
                    <div class="members-card">
                        <h3>üëó Auxiliares da Porta (Irm√£s)</h3>
                        <ul class="members-list" id="auxiliares-list">
                            <!-- Populated by JS -->
                        </ul>
                        <p class="empty-message" id="auxiliares-empty">Nenhuma auxiliar cadastrada</p>
                    </div>
                    <div class="members-card">
                        <h3>üé§ Operadores de Som (Irm√£os)</h3>
                        <ul class="members-list" id="som-list">
                            <!-- Populated by JS -->
                        </ul>
                        <p class="empty-message" id="som-empty">Nenhum operador de som cadastrado</p>
                    </div>
                    <div class="members-card">
                        <h3>üßØüëî Brigadistas (Irm√£os)</h3>
                        <ul class="members-list" id="brigadista-irmao-list">
                            <!-- Populated by JS -->
                        </ul>
                        <p class="empty-message" id="brigadista-irmao-empty">Nenhum brigadista (irm√£o) cadastrado</p>
                    </div>
                    <div class="members-card">
                        <h3>üßØüëó Brigadistas (Irm√£s)</h3>
                        <ul class="members-list" id="brigadista-irma-list">
                            <!-- Populated by JS -->
                        </ul>
                        <p class="empty-message" id="brigadista-irma-empty">Nenhum brigadista (irm√£) cadastrado</p>
                    </div>
                </div>
            </section>

            <!-- Escalas Tab -->
            <section id="escalas" class="tab-content">
                <div class="section-header">
                    <h2>Gerar Escala</h2>
                </div>

                <!-- Month/Year Selector -->
                <div class="form-card">
                    <h3>Selecionar Per√≠odo</h3>
                    <div class="period-selector">
                        <div class="form-group">
                            <label for="month-select">M√™s</label>
                            <select id="month-select">
                                <option value="0">Janeiro</option>
                                <option value="1">Fevereiro</option>
                                <option value="2">Mar√ßo</option>
                                <option value="3">Abril</option>
                                <option value="4">Maio</option>
                                <option value="5">Junho</option>
                                <option value="6">Julho</option>
                                <option value="7">Agosto</option>
                                <option value="8">Setembro</option>
                                <option value="9">Outubro</option>
                                <option value="10">Novembro</option>
                                <option value="11">Dezembro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="year-select">Ano</label>
                            <select id="year-select">
                                <!-- Populated by JS -->
                            </select>
                        </div>
                        <button class="btn-primary" onclick="generateScheduleForm()">
                            <span>üìÖ</span> Gerar Calend√°rio
                        </button>
                    </div>
                </div>

                <!-- Schedule Form -->
                <div class="schedule-form-container" id="schedule-form-container" style="display: none;">
                    <div class="form-card">
                        <div class="schedule-header">
                            <h3 id="schedule-title">Escala de Janeiro 2025</h3>
                            <div class="schedule-actions">
                                <button class="btn-ai" onclick="generateAISchedule()">
                                    <span>‚ú®</span> Preencher com IA
                                </button>
                                <button class="btn-secondary" onclick="saveSchedule()">
                                    <span>üíæ</span> Salvar
                                </button>
                                <button class="btn-primary" onclick="generatePDFPorteirosBtn()">
                                    <span>üìÑ</span> PDF Irm√£os
                                </button>
                                <button class="btn-pink" onclick="generatePDFAuxiliaresBtn()">
                                    <span>üìÑ</span> PDF Irm√£s
                                </button>
                            </div>
                        </div>

                        <div class="schedule-table-container">
                            <table class="schedule-table" id="schedule-table">
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Culto</th>
                                        <th>Porteiro Principal</th>
                                        <th>Porteiro Lateral</th>
                                        <th>Auxiliar Principal</th>
                                        <th>Auxiliar Lateral</th>
                                    </tr>
                                </thead>
                                <tbody id="schedule-body">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Saved Schedules -->
                <div class="saved-schedules">
                    <h3>Escalas Salvas</h3>
                    <div class="schedules-list" id="saved-schedules-list">
                        <!-- Populated by JS -->
                    </div>
                    <p class="empty-message" id="schedules-empty">Nenhuma escala salva</p>
                </div>
            </section>

            <!-- Som Tab -->
            <section id="som" class="tab-content">
                <div class="section-header">
                    <h2>üé§ Escala de Operadores de Som</h2>
                </div>

                <!-- Month/Year Selector for Som -->
                <div class="form-card">
                    <h3>Selecionar Per√≠odo</h3>
                    <div class="period-selector">
                        <div class="form-group">
                            <label for="som-month-select">M√™s</label>
                            <select id="som-month-select">
                                <option value="0">Janeiro</option>
                                <option value="1">Fevereiro</option>
                                <option value="2">Mar√ßo</option>
                                <option value="3">Abril</option>
                                <option value="4">Maio</option>
                                <option value="5">Junho</option>
                                <option value="6">Julho</option>
                                <option value="7">Agosto</option>
                                <option value="8">Setembro</option>
                                <option value="9">Outubro</option>
                                <option value="10">Novembro</option>
                                <option value="11">Dezembro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="som-year-select">Ano</label>
                            <select id="som-year-select">
                                <!-- Populated by JS -->
                            </select>
                        </div>
                        <button class="btn-primary" onclick="generateSomScheduleForm()">
                            <span>üìÖ</span> Gerar Calend√°rio
                        </button>
                    </div>
                </div>

                <!-- Som Schedule Form -->
                <div class="schedule-form-container" id="som-schedule-form-container" style="display: none;">
                    <div class="form-card">
                        <div class="schedule-header">
                            <h3 id="som-schedule-title">Escala de Som - Janeiro 2025</h3>
                            <div class="schedule-actions">
                                <button class="btn-ai" onclick="generateAISomSchedule()">
                                    <span>‚ú®</span> Preencher com IA
                                </button>
                                <button class="btn-secondary" onclick="saveSomSchedule()">
                                    <span>üíæ</span> Salvar
                                </button>
                                <button class="btn-primary" onclick="generateSomPDF()">
                                    <span>üìÑ</span> Gerar PDF
                                </button>
                            </div>
                        </div>

                        <div class="schedule-table-container">
                            <table class="schedule-table" id="som-schedule-table">
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Culto</th>
                                        <th>Operador de Som</th>
                                    </tr>
                                </thead>
                                <tbody id="som-schedule-body">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Saved Som Schedules -->
                <div class="saved-schedules">
                    <h3>Escalas de Som Salvas</h3>
                    <div class="schedules-list" id="saved-som-schedules-list">
                        <!-- Populated by JS -->
                    </div>
                    <p class="empty-message" id="som-schedules-empty">Nenhuma escala de som salva</p>
                </div>
            </section>

            <!-- Brigadista Tab -->
            <section id="brigadista" class="tab-content">
                <div class="section-header">
                    <h2>üßØ Escala de Brigadistas</h2>
                </div>

                <!-- Month/Year Selector for Brigadista -->
                <div class="form-card">
                    <h3>Selecionar Per√≠odo</h3>
                    <div class="period-selector">
                        <div class="form-group">
                            <label for="brigadista-month-select">M√™s</label>
                            <select id="brigadista-month-select">
                                <option value="0">Janeiro</option>
                                <option value="1">Fevereiro</option>
                                <option value="2">Mar√ßo</option>
                                <option value="3">Abril</option>
                                <option value="4">Maio</option>
                                <option value="5">Junho</option>
                                <option value="6">Julho</option>
                                <option value="7">Agosto</option>
                                <option value="8">Setembro</option>
                                <option value="9">Outubro</option>
                                <option value="10">Novembro</option>
                                <option value="11">Dezembro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="brigadista-year-select">Ano</label>
                            <select id="brigadista-year-select">
                                <!-- Populated by JS -->
                            </select>
                        </div>
                        <button class="btn-primary" onclick="generateBrigadistaScheduleForm()">
                            <span>üìÖ</span> Gerar Calend√°rio
                        </button>
                    </div>
                </div>

                <!-- Brigadista Schedule Form -->
                <div class="schedule-form-container" id="brigadista-schedule-form-container" style="display: none;">
                    <div class="form-card">
                        <div class="schedule-header">
                            <h3 id="brigadista-schedule-title">Escala de Brigadistas - Janeiro 2025</h3>
                            <div class="schedule-actions">
                                <button class="btn-ai" onclick="generateAIBrigadistaSchedule()">
                                    <span>‚ú®</span> Preencher com IA
                                </button>
                                <button class="btn-secondary" onclick="saveBrigadistaSchedule()">
                                    <span>üíæ</span> Salvar
                                </button>
                                <button class="btn-primary" onclick="generateBrigadistaPDF()">
                                    <span>üìÑ</span> Gerar PDF
                                </button>
                            </div>
                        </div>

                        <div class="schedule-table-container">
                            <table class="schedule-table" id="brigadista-schedule-table">
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Culto</th>
                                        <th>Brigadista (Irm√£o)</th>
                                        <th>Brigadista (Irm√£)</th>
                                    </tr>
                                </thead>
                                <tbody id="brigadista-schedule-body">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Saved Brigadista Schedules -->
                <div class="saved-schedules">
                    <h3>Escalas de Brigadistas Salvas</h3>
                    <div class="schedules-list" id="saved-brigadista-schedules-list">
                        <!-- Populated by JS -->
                    </div>
                    <p class="empty-message" id="brigadista-schedules-empty">Nenhuma escala de brigadista salva</p>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Escala CCB ¬© 2025 - Feito com ‚ù§Ô∏è para a obra de Deus</p>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <!-- jsPDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

    <!-- App Scripts -->
    <script src="firebase-config.js"></script>
    <script src="scheduler-ai.js"></script>
    <script src="app.js"></script>
</body>

</html>